<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>运营商管理平台-门票管理</title>
	</head>
	<body>
		<div class="pjax-container">
			<!--内容部分-->
			<!-- Steps -->
			<script src="/resource/js/plugins/staps/jquery.steps.min.js"></script>
			<link href="/resource/css/plugins/steps/jquery.steps.css" rel="stylesheet">

			<!-- Jquery Validate -->
			<script src="/resource/js/plugins/validate/jquery.validate.min.js"></script>
			<script src="/resource/js/plugins/validate/messages_zh.js"></script>
			<!-- Data picker -->
			<link href="/resource/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
			<script src="/resource/js/plugins/datapicker/bootstrap-datepicker.js"></script>
			
			<!-- iCheck -->
			<script src="/resource/js/plugins/iCheck/icheck.min.js"></script>
			<link href="/resource/css/plugins/iCheck/custom.css" rel="stylesheet">
			
			<!-- SUMMERNOTE -->
    		<script src="/resource/js/plugins/summernote/summernote.min.js"></script>
			<link href="/resource/css/plugins/summernote/summernote.css" rel="stylesheet">
			<style>
				.wizard> .content> .body {
					position: relative;
				}
				
				.wizard> .content {
					width: 100%;
					background: inherit;
				}
			</style>
			<div class="row wrapper border-bottom white-bg dashboard-header">
				<div class="col-sm-10">
					<form role="form" class="form-inline">

						<div class="form-group">
							<label>门票状态：</label>
							<div class="btn-group">
								<button class="btn 			   btn-primary btn-radio" type="button">全部</button>
								<button class="btn btn-outline btn-primary btn-radio" type="button">已上线</button>
								<button class="btn btn-outline btn-primary btn-radio" type="button">未上线</button>
							</div>
						</div>

						<div class="form-group">
							<label>搜索：</label>
							<input class="form-control" type="email" placeholder="品牌门店券名搜索">
						</div>

						<div class="form-group">
							<button class="btn btn-w-m btn-primary" type="buttom">查询</button>
						</div>
					</form>
				</div>
				<div class="col-sm-2">
					<a class="btn btn-block btn-warning" data-toggle="modal" href="运营商管理平台-新增门票.html" data-target="#discount-add">新增门票</a>
				</div>
				<div id="discount-add" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
					<div class="modal-dialog modal-lg" role="document">
						<div class="modal-content">

						</div>
					</div>
				</div>
			</div>
			<div class="wrapper wrapper-content animated fadeInRight">
				<div class="row">
					<div class="col-lg-12">
						<div class="ibox">
							<!--<div class="ibox-title">
								<h5>运营商</h5>
							</div>-->
							<div class="ibox-content project-list">
								<table class="table table-bordered table-hover">
									<thead>
										<tr>
											<th>门票名称</th>
											<th>可使用门店</th>
											<th>可使用总次数</th>
											<th>已使用总次数</th>
											<th>剩余总次数</th>
											<th>有效期</th>
											<th>门票状态</th>
											<th>操作</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>1234566688</td>
											<td>门店1、门店2、门店3</td>
											<td>6000</td>
											<td>5000</td>
											<td>10</td>
											<td>2017.01.18-2017.01.18</td>
											<td>已上线</td>
											<td>
												<a class="icon-only discount-details" data-toggle="tooltip" title="详情">
													<i class="fa fa-list-alt" data-toggle="modal" data-target="#modalShow"></i>
												</a>
												<a class="icon-only text-warning" data-toggle="tooltip" title="下线">
													<i class="fa fa-cloud-download" data-toggle="modal" data-target="#modalShow"></i>
												</a>
											</td>
										</tr>
										<tr>
											<td>1234566688</td>
											<td>门店1、门店2、门店3</td>
											<td>6000</td>
											<td>5000</td>
											<td>10</td>
											<td>2017.01.18-2017.01.18</td>
											<td>已上线</td>
											<td>
												<a class="icon-only discount-details" data-toggle="tooltip" title="详情">
													<i class="fa fa-list-alt" data-toggle="modal" data-target="#modalShow"></i>
												</a>
												<a class="icon-only text-warning" data-toggle="tooltip" title="下线">
													<i class="fa fa-cloud-download" data-toggle="modal" data-target="#modalShow"></i>
												</a>
											</td>
										</tr>
									</tbody>
								</table>
								<div id="discount-details" class="modal fade" aria-hidden="true">
									<div class="modal-dialog" style="width: 70%">
										<div class="modal-content">
											<div class="modal-body">
												<div class="row">
													<div class="table-responsive project-list">
														<table class="table table-bordered table-hover">
															<thead>
																<tr>
																	<th>门票名称</th>
																	<th>可使用门店</th>
																	<th>可使用总次数</th>
																	<th>已使用总次数</th>
																	<th>剩余总次数</th>
																	<th>有效期</th>
																	<th>门票状态</th>
																</tr>
															</thead>
															<tbody>
																<tr class="table-parent">
																	<td>1234566688</td>
																	<td>门店1、门店2、门店3</td>
																	<td>6000</td>
																	<td>5000</td>
																	<td>10</td>
																	<td>2017.01.18-2017.01.18</td>
																	<td>已上线</td>
																</tr>
															</tbody>
														</table>
														<table class="table table-bordered table-hover">
															<thead>
																<tr>
																	<th>已关联通行权益</th>
																	<th>品牌名称</th>
																	<th>适用门店</th>
																	<th>可使用次数</th>
																	<th>已使用次数</th>
																	<th>剩余次数</th>
																</tr>
															</thead>
															<tbody>
																<tr class="table-parent">
																	<td>苏家一卡通</td>
																	<td>苏家</td>
																	<td>门店1门店2门店1</td>
																	<td>50</td>
																	<td>40</td>
																	<td>10</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-12">
										<div class="btn-group pull-right">
											<a type="a" class="btn btn-white"><i class="fa fa-chevron-left"></i></a>
											<a class="btn btn-white">1</a>
											<a class="btn btn-white  active">2</a>
											<a class="btn btn-white">3</a>
											<a class="btn btn-white">4</a>
											<a type="a" class="btn btn-white"><i class="fa fa-chevron-right"></i> </a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<script>
				$(".btn-radio").click(function() {
					$(".btn-radio").addClass("btn-outline");
					$(this).removeClass("btn-outline");
				});
				$(".discount-details").click(function(){
					$("#discount-details").modal();
				});
				$('[data-toggle="tooltip"]').tooltip({
					'placement':'top'
				});
				$('#discount-add').on({
					'loaded.bs.modal': function(e) {
						var form = $("#wizard");
						form.validate({
						    errorPlacement: function errorPlacement(error, element) { 
						    	error.addClass("m-n");
								error.appendTo(element.parent().parent()); 
						    },
						    rules: {
						        confirm: {
						            equalTo: "#password"
						        }
						    }
						});
						form.steps({
							bodyTag: "fieldset",
							enableCancelButton: 1,
							labels: {
								cancel: "取消",
								finish: "完成",
								next: "下一步",
								previous: "上一步",
							},
							onInit: function() {
								//富文本初始化
            					$('.summernote').summernote();
            					//日期选择器初始化
            					$('#data .input-daterange').datepicker({
						            keyboardNavigation: false,
						            forceParse: false,
						            autoclose: true,
						            format: "yyyy-mm-dd"
						        });
								$("#timerange-type").change(function(){
									var c=$(this).val();
									if(c==0){
										$("#date").removeClass("hide");
										$("#period").addClass("hide");
									}else if(c==1){
										$("#period").removeClass("hide");
										$("#date").addClass("hide");
									}
								});
								$('.i-checks').iCheck({
									checkboxClass: 'icheckbox_square-green',
									radioClass: 'iradio_square-green',
								});
								check("brand-store");
								function check(name){
									var checkboxes = $("input[name="+name+"]:not(.check-all)");
									var checkAll = $("input[name="+name+"].check-all");
									checkboxes.on('ifChanged', function(event){
										if(checkboxes.filter(':checked').length == checkboxes.length) {
											checkAll.prop('checked', 'checked');
										} else {
											checkAll.removeAttr('checked');
										}
										checkAll.iCheck('update');
									});
									checkAll.on('ifChecked ifUnchecked', function(event) {
										if (event.type == 'ifChecked') {
											checkboxes.iCheck('check');
										} else {
											checkboxes.iCheck('uncheck');
										}
									});
								}
								tableFold();
								function tableFold(){
									$(".table-parent .fa-plus").parent().click(function(){
										$(this).parent().nextUntil(".table-parent").toggle();
									});
								}
								$("input[name='serviceMode']").on('ifChanged',function(){
									var value = $("input[name='serviceMode']:checked").val();
									console.log(value);
									if(value==1){
										$(".noProvider").hide();
										$(".isProvider").removeClass("hide");
									}else if(value==0){
										$(".noProvider").show();
										$(".isProvider").addClass("hide");
									}
								})
							},
							onStepChanging: function(event, currentIndex, newIndex) {
								form.validate().settings.ignore = ":disabled,:hidden";
								return form.valid();
							},
							onStepChanged: function(event, currentIndex, priorIndex) {
								// Suppress (skip) "Warning" step if the user is old enough.
								if(currentIndex === 2 && Number($("#age").val()) >= 18) {
									$(this).steps("next");
								}
	
								// Suppress (skip) "Warning" step if the user is old enough and wants to the previous step.
								if(currentIndex === 2 && priorIndex === 3) {
									$(this).steps("previous");
								}
							},
							onCanceled: function() {
								$(e.target).modal('hide');
							},
							onFinishing: function(event, currentIndex) {
								var form = $(this);
	
								// Disable validation on fields that are disabled.
								// At this point it's recommended to do an overall check (mean ignoring only disabled fields)
								form.validate().settings.ignore = ":disabled";
	
								// Start validation; Prevent form submission if false
								return form.valid();
							},
							onFinished: function(event, currentIndex) {
								var form = $(this);
	
								// Submit form input
								form.submit();
							}
						})
					},
					'hidden.bs.modal':function(e) {
						$(e.target).removeData("bs.modal");
					}
				});
			</script>
		</div>
	</body>
</html>